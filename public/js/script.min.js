"use strict";var addIcon=document.getElementById("create-new-task-link"),inputTask=document.getElementById("create-new-task-input");inputTask.setAttribute("autocomplete","off");var unfinishedTasks=document.getElementById("unfinished-tasks-list"),finishedTasks=document.getElementById("finished-tasks-list");function createNewElement(e,t){var a=document.createElement("li");a.setAttribute("class","todo-list-item");var i=document.createElement("a");i.innerHTML=t?(i.className="material icons checkbox",'<i class="material-icons">check_box</i>'):(i.className="material icons checkbox",'<i class="material-icons">check_box_outline_blank</i>');var s=document.createElement("label");s.innerText=e,s.setAttribute("class","unfinished-tasks-list-label");var n=document.createElement("input");n.type="text",n.setAttribute("class","form-control"),n.setAttribute("class","todo-list-input"),n.setAttribute("style","display: none");var l=document.createElement("a");l.className="material-icons edit",l.innerHTML='<i class="material-icons">edit</i>';var c=document.createElement("a");return c.className="material-icons delete",c.innerHTML='<i class="material-icons">delete</i>',a.appendChild(i),a.appendChild(s),a.appendChild(n),a.appendChild(l),a.appendChild(c),a}function addTask(){if(inputTask.value){var e=createNewElement(inputTask.value,!1);unfinishedTasks.appendChild(e),bindTaskEvents(e,finishTask),inputTask.value=""}save()}function deleteTask(){var e=this.parentNode;e.parentNode.removeChild(e),save()}function editTask(){var e=this,t=this.parentNode,a=t.querySelector("label"),i=t.querySelector("input[type = text]");t.classList.contains("editMode")?(a.innerText=i.value,a.setAttribute("style","display: inline-block"),i.setAttribute("style","display: none"),e.className="material-icons edit",e.innerHTML='<i class="material-icons">edit</i>',save()):(i.value=a.innerText,a.setAttribute("style","display: none"),i.setAttribute("style","display: inline-block"),e.className="material-icons save",e.innerHTML='<i class="material-icons">save</i>'),t.classList.toggle("editMode")}function finishTask(){var e=this.parentNode,t=e.querySelector("a.checkbox");t.className="material icons checkbox",t.innerHTML='<i class="material-icons">check_box</i>',finishedTasks.appendChild(e),bindTaskEvents(e,unfinishTask),save()}function unfinishTask(){var e=this.parentNode,t=e.querySelector("a.checkbox");t.className="material icons checkbox",t.innerHTML='<i class="material-icons">check_box_outline_blank</i>',unfinishedTasks.appendChild(e),bindTaskEvents(e,finishTask),save()}function bindTaskEvents(e,t){var a=e.querySelector("a.checkbox"),i=e.querySelector("a.edit"),s=e.querySelector("a.delete");a.onclick=t,i.onclick=editTask,s.onclick=deleteTask}function save(){for(var e=[],t=0;t<unfinishedTasks.children.length;t++)e.push(unfinishedTasks.children[t].getElementsByTagName("label")[0].innerText);for(var a=[],i=0;i<finishedTasks.children.length;i++)a.push(finishedTasks.children[i].getElementsByTagName("label")[0].innerText);localStorage.removeItem("todo"),localStorage.setItem("todo",JSON.stringify({unfinishedTasks:e,finishedTasks:a}))}function load(){return JSON.parse(localStorage.getItem("todo"))}addIcon.onclick=addTask,document.querySelector(".form-inline").onsubmit=function(e){e.preventDefault(),addTask()};var data=load();data.unfinishedTasks.forEach(function(e){var t=createNewElement(e,!1);unfinishedTasks.appendChild(t),bindTaskEvents(t,finishTask)}),data.finishedTasks.forEach(function(e){var t=createNewElement(e,!0);finishedTasks.appendChild(t),bindTaskEvents(t,unfinishTask)});