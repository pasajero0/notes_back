"use strict";var addIcon=document.getElementById("create-new-task-link"),inputTask=document.getElementById("create-new-task-input");inputTask.setAttribute("autocomplete","off");var unfinishedTasks=document.getElementById("unfinished-tasks-list"),finishedTasks=document.getElementById("finished-tasks-list");function createNewElement(e,t){var a=document.createElement("li");a.setAttribute("class","todo-list-item");var n=document.createElement("a");n.innerHTML=t?(n.className="material icons checkbox",'<i class="material-icons">check_box</i>'):(n.className="material icons checkbox",'<i class="material-icons">check_box_outline_blank</i>');var s=document.createElement("label");s.innerText=e,s.setAttribute("class","unfinished-tasks-list-label");var i=document.createElement("input");i.type="text",i.setAttribute("class","form-control"),i.setAttribute("class","todo-list-input"),i.setAttribute("style","display: none");var l=document.createElement("a");l.className="material-icons edit",l.innerHTML='<i class="material-icons">edit</i>';var c=document.createElement("a");return c.className="material-icons delete",c.innerHTML='<i class="material-icons">delete</i>',a.appendChild(n),a.appendChild(s),a.appendChild(i),a.appendChild(l),a.appendChild(c),a}function addTask(){if(inputTask.value){var e=createNewElement(inputTask.value,!1);unfinishedTasks.appendChild(e),bindTaskEvents(e,finishTask),inputTask.value=""}save()}function deleteTask(){var e=this.parentNode;e.parentNode.removeChild(e),save()}function editTask(){var e=this,t=this.parentNode,a=t.querySelector("label"),n=t.querySelector("input[type = text]");t.classList.contains("editMode")?(a.innerText=n.value,a.setAttribute("style","display: inline-block"),n.setAttribute("style","display: none"),e.className="material-icons edit",e.innerHTML='<i class="material-icons">edit</i>',save()):(n.value=a.innerText,a.setAttribute("style","display: none"),n.setAttribute("style","display: inline-block"),e.className="material-icons save",e.innerHTML='<i class="material-icons">save</i>'),t.classList.toggle("editMode")}function finishTask(){var e=this.parentNode,t=e.querySelector("a.checkbox");t.className="material icons checkbox",t.innerHTML='<i class="material-icons">check_box</i>',finishedTasks.appendChild(e),bindTaskEvents(e,unfinishTask),save()}function unfinishTask(){var e=this.parentNode,t=e.querySelector("a.checkbox");t.className="material icons checkbox",t.innerHTML='<i class="material-icons">check_box_outline_blank</i>',unfinishedTasks.appendChild(e),bindTaskEvents(e,finishTask),save()}function bindTaskEvents(e,t){var a=e.querySelector("a.checkbox"),n=e.querySelector("a.edit"),s=e.querySelector("a.delete");a.onclick=t,n.onclick=editTask,s.onclick=deleteTask}function save(){for(var e=[],t=0;t<unfinishedTasks.children.length;t++)e.push(unfinishedTasks.children[t].getElementsByTagName("label")[0].innerText);for(var a=[],n=0;n<finishedTasks.children.length;n++)a.push(finishedTasks.children[n].getElementsByTagName("label")[0].innerText);localStorage.removeItem("todo"),localStorage.setItem("todo",JSON.stringify({unfinishedTasks:e,finishedTasks:a}))}function load(){return JSON.parse(localStorage.getItem("todo"))}addIcon.onclick=addTask,document.querySelector(".form-inline").onsubmit=function(e){e.preventDefault(),addTask()};var getArrFunc=function(e){return e.map(function(e){return e.textContent})},getValue=function(){var e=document.querySelectorAll(".unfinished-tasks-section .unfinished-tasks-list-label"),t=document.querySelectorAll(".finished-tasks-section .unfinished-tasks-list-label"),a=Array.prototype.slice.call(e),n=Array.prototype.slice.call(t);return{unfinishedTasks:getArrFunc(a),finishedTasks:getArrFunc(n)}},data=load(),parseLocalStorage=function(e,t,a,n){var s=createNewElement(e,t);a.appendChild(s),bindTaskEvents(s,n)};data.unfinishedTasks.forEach(function(e){return parseLocalStorage(e,!1,unfinishedTasks,finishTask)}),data.finishedTasks.forEach(function(e){return parseLocalStorage(e,!0,finishedTasks,unfinishTask)});